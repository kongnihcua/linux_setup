<html>
  <head>
    <title>Linux Setup</title>
    <meta content="">
    <style>
      h2 {margin-top: 100pt; margin-bottom: 5pt;}
      h3 {margin-top: 20pt; margin-bottom: 5pt;}
      p {margin-top: 10pt; margin-bottom: 10pt;}
      code {color:blue;}
      pre {color: green;}
    </style>
  </head>
<body>

<div style="margin-left: 30vw; margin-right: 30vw;">

<h2>System Settings</h2>
<h3>Thunderbolt Authorization</h3>
<p>check the UUID of target device:</p>
<code>boltctl</code>
<p>authoritze device to allow usb peripheral connections:</p>
<code>boltctl authorize DEVICE_UUID</code>

<h2>User Management</h2>
<h3>Adding/ Deleting a User</h3>
<code>sudo adduser userName</code>
<br>
<code>sudo userdel userName</code>
<h3>Changing Password</h3>
<code>passwd</code>
<h3>Show groups a user belongs</h3>
<code>groups</code>
<h3>Adding a Sudoer</h3>
<p>edit /etc/sudoers using visudo:</p>
<code>sudo visudo</code>
<p>and place the following line:</p>
<code>youruser    ALL=(ALL) NOPASSWD:ALL</code>
<p>after</p>
<pre># Allow members of group sudo to execute any command
  %sudo   ALL=(ALL:ALL) ALL</pre>
<p>the <code>NOPASSWD</code> keyword will disable the password prompt when you call <code>sudo</code> .</p>

<h2>Setup Desktop Enviornment</h2>
<p>Personally i've been using KDE as desktop environment. It comprises a bundle of softwares of names usually containing the letter 'k'. Plamsa Desktop provides a windows-like experience and virtual desktop is helpful when you want to separate programs of different contexts</p>
<p>install the full suite:</p>
<code>sudo apt install kde-full</code>
<p>OR only install the core applications that i find most useful:</p>
<code>sudo apt install dolphin kate konsole plasma-desktop</code>
<h3>Keyboard Shortcuts</h3>
<p>keyboard shortcuts can be set at Global Keyboard Shortcuts</p>
<table>
    <tr><th>Shortcut</th><th>Action</th></tr>
    <tr><td><kbd>META</kbd> + <kbd>E</kbd></td><td>Dolphin</td></tr>
    <tr><td><kbd>CTRL</kbd> + <kbd>ALT</kbd> + <kbd>T</kbd></td><td>Konsole</td></tr>
</table>

<h2>Setup ~/workspace</h2>
<p>a flattest possible folder hierarchy benefits readability of scripts and consistent naming enhance portability. I organise all repositories, public or private into a single folder:</p>
<code>~/workspace/</code>

<h2>Access Windows Network Drive</h2>
<p>install requirement:</p>
<code>sudo apt install cifs-utils</code>
<p>mount network drive directory:</p>
<code>sudo mount -t cifs -o username=USERNAME,uid=$(id -u) //DRIVE_IP/team/ /mnt/FILESYSTEM</code>

<h3>Setup Git</h3>
<p>store your credentials for push/pull without authentication:</p>
<code>git config credential.helper store</code>

<h2>Setup PostgresSQL</h2>
Environment: Ubuntu Focal
<h3>install dependencies</h3>
<ul>
  <li><code>sudo apt install bison flex zlib1g-dev libreadline-dev</code></li>
</ul>
<h3>compile and installation on local folder</h3>
<ul>
  <li><code>cd ~/workspace</code></li>
  <li><code>git clone https://github.com/postgres/postgres</code></li>
  <li><code>cd postgres</code></li>
  <li><code>git checkout REL_13_1</code></li>
  <li><code>./configure --prefix=/home/andyau/workspace/postgres/build</code></li>
  <li><code>make</code></li>
  <li><code>make install</code></li>
</ul>

<h3>setup Environmetal Variable for better readability</h3>
<code>export PG=$HOME/workspace/postgres/build/bin && export LD_LIBRARY_PATH=$HOME/workspace/postgres/build/lib</code>

<h3>initialize a new Database Cluster in target folder</h3>
<p>note: this only initialize the directory file system for postgres to work.</p>
<code>$PG/initdb -D YOUR_PROJECT_DIRECTORY/data</code>

<h3>start Postgres Server instance</h3>
<code>$PG/postgres -D YOUR_PROJECT_DIRECTORY/data</code>

<p>now things should be running. create a database base: </p>
<li><code>$PG/createdb DB_NAME</code></li>


<h2>Access Client Shell of PostgresSQL</h2>
<code>$PG/psql DB_NAME</code>

<h2>Setup PostGIS</h2>
<h3>install dependencies</h3>
<li><code>sudo apt install autoconf libtool libxml2-dev libgeos-dev libproj-dev libgdal-dev</code></li>
<p>where GEOS is a library for performing operations on two-dimensional vector geometries.</p>

<h3>compile and installation on local folder</h3>
<ul>
  <li><code>cd ~/workspace</code></li>
  <li><code>git clone https://git.osgeo.org/gitea/postgis/postgis.git</code></li>
  <li><code>cd postgis</code></li>
  <li><code>git checkout 3.1.0alpha2</code></li>
  <li><code>./autogen.sh</code></li>
  <li><code>./configure --with-pgconfig=$PG/pg_config</code></li>
  <li><code>make</code></li>
  <li><code>make install</code></li>
</ul>
<details>
    <summary>the library files and executables will be installed to Postgres library:</summary>
    <pre>
        For your info, using the values determined from 
        /home/andyau/workspace/postgres/build/bin/pg_config we will be installing:   
          * postgis shared library in /home/andyau/workspace/postgres/build/lib 
          * postgis SQL files in /home/andyau/workspace/postgres/build/share/contrib/postgis-3.1 
          * postgis executables in /home/andyau/workspace/postgres/build/bin
    </pre>
</details>


<h2>Setup OpenWRT on Raspberry Pi 4B</h2>
<h3>Flash OS onto a microSD card</h3>
<p>Obtain Image:</p>
<code>wget https://downloads.openwrt.org/snapshots/targets/bcm27xx/bcm2711/openwrt-bcm27xx-bcm2711-rpi-4-ext4-factory.img.gz</code>
<p>Plug in SD card, identify the partition in df, in our case /dev/mmcblk0. If it is also auto mounted, as shown in sudo fdisk -l, run e.g.:</p>
<code>sudo umount /media/auchingnok/1f84f91b-62f9-45f7-ac48-38ce064f32c1</code>
<p>Format the card:</p>
<code>sudo mkfs.ext4 /dev/mmcblk0</code>
<p>Flash image:</p>
<code>sudo dd if=./openwrt-bcm27xx-bcm2711-rpi-4-ext4-factory.img of=/dev/mmcblk0 bs=2M conv=fsync</code>
<p>Plugin the SD to Raspberry 4 and boot</p>

<h3>Setup Wifi</h3>
<p>Check status of devices:</p>
<code>ip a</code>
<code>cat /proc/net/dev</code>
<p>Check wifi status:</p>
<code>wifi status</code>
<p>Edit wifi config:</p>
<code>vim /etc/config/wireless</code>
<p>Reload network:</p>
<code>service network reload</code>
<p>To check if an Access Point is created and put on air:</p>
<code>iw dev</code>
<p>To check debug messages:</p>
<code>dmesg</code>
<p>To check the debug log:</p>
<code>logread</code>

</div>
</body>
</html>